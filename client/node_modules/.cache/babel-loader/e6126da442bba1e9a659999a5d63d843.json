{"ast":null,"code":"var _jsxFileName = \"/home/carina/priv/trot-race-simulator/client/src/App.jsx\";\nimport React from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport './style.scss';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      startResponse: false,\n      finishResponse: false,\n      endpoint: \"http://127.0.0.1:4001\"\n    };\n  }\n\n  componentWillMount() {\n    const {\n      endpoint\n    } = this.state;\n    const socket = socketIOClient(endpoint);\n    socket.on(\"StartHorses\", dataA => this.setState({\n      startResponse: dataA\n    }));\n    socket.on(\"FinishHorses\", dataB => this.setState({\n      finishResponse: dataB\n    }));\n  }\n\n  componentDidMount() {// console.log('startResponse', this.state.startResponse);\n    // console.log('finishResponse', this.state.finishResponse);\n  }\n\n  componentDidUpdate(prevState) {} // If we have a new update\n  // if (!this.featuresEqual(prevState.startResponse, this.state.startResponse)) {\n  // }\n  // featuresEqual(a, b) {\n  //   const comparable = (features) => features\n  //       .slice()\n  //       .sort()\n  //       .join(',');\n  //   return comparable(a) === comparable(b);\n  // }\n\n\n  renderTableData() {\n    const {\n      startResponse\n    } = this.state;\n\n    if (startResponse && startResponse[0].event === 'start') {\n      return Object.keys(startResponse.sort(this.compare)).map(function (key) {\n        const id = startResponse[key].horse.name.replace(' ', '-');\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: key,\n          id: id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }\n        }, startResponse[key].horse.id), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }\n        }, startResponse[key].horse.name), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }\n        }, startResponse[key].time > 0 ? startResponse[key].time : ''));\n      });\n    }\n\n    return;\n  }\n\n  updateTableData() {\n    const horses = this.state.startResponse;\n    const finishHorse = this.state.finishResponse;\n    const id = finishHorse.horse.name.replace(' ', '-');\n    const row = document.getElementById(id);\n    let child;\n\n    while (child = row.firstChild) {\n      child.remove();\n    }\n\n    const p = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, finishHorse.horse.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }\n    }, finishHorse.horse.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, finishHorse.time));\n    row.appendChild(p);\n    console.log('Finsih HORSE:', finishHorse);\n\n    if (finishHorse && finishHorse.horse.name) {\n      for (let i = 0; i < horses.lenght; i++) {\n        if (horses[i].name === finishHorse.horse.name) {\n          console.log('this horse', horses[i].name, ' : ', finishHorse.horse.name);\n        }\n      }\n\n      const result = horses.find(({\n        name\n      }) => name === finishHorse.horse.name);\n      console.log('result', result);\n    } // console.log('horses',horses);\n    // 4:\n    //   event: \"start\"\n    //   horse: {id: 1, name: \"Isabell Altenwerth\"}\n    // time: 13480\n    // console.log('finish horse', finishHorse);\n    // event: \"finish\"\n    // horse: {id: \"2\", name: \"Alfredo Mraz\"}\n    // time: 7710\n\n  } // Not used??\n  // renderData() {\n  //   const { horses } = this.state;\n  //   return Object.keys(horses).map(function(key) {\n  //     const id = horses[key].horse.name.replace(' ', '-');\n  //     return (\n  //       <tr key={key} ref={id}>\n  //           <td>{horses[key].horse.id}</td>\n  //           <td>{horses[key].horse.name}</td>\n  //           <td>{horses[key].time}</td>\n  //           {/* <td>{getTimeInSeconds(horses[key].time)}</td> */}\n  //       </tr>\n  //     )\n  //   });\n  // }\n\n\n  getTimeInSeconds(time) {}\n\n  compare(a, b) {\n    const timeA = a.time;\n    const timeB = b.time;\n    let comparison = 0;\n\n    if (timeA > timeB) {\n      comparison = 1;\n    } else if (timeA < timeB) {\n      comparison = -1;\n    }\n\n    return comparison;\n  } // isClientMode() {\n  //   return typeof(ENVIRONMENT) != 'undefined' && ENVIRONMENT === 'client';\n  // }\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      id: \"results\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, \"No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, \"Horse\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, \"Time\")), this.state.startResponse && this.renderTableData(), this.state.finishResponse && this.updateTableData())));\n  }\n\n}\n\nexport default App; // const tifOptions = Object.keys(tifs).map(key =>\n//   <option value={key}>{tifs[key]}</option>\n// )\n// {Object.keys(yourObject).map(function(key) {\n//   return <div>Key: {key}, Value: {yourObject[key]}</div>;\n// })}","map":{"version":3,"sources":["/home/carina/priv/trot-race-simulator/client/src/App.jsx"],"names":["React","socketIOClient","App","Component","constructor","state","startResponse","finishResponse","endpoint","componentWillMount","socket","on","dataA","setState","dataB","componentDidMount","componentDidUpdate","prevState","renderTableData","event","Object","keys","sort","compare","map","key","id","horse","name","replace","time","updateTableData","horses","finishHorse","row","document","getElementById","child","firstChild","remove","p","appendChild","console","log","i","lenght","result","find","getTimeInSeconds","a","b","timeA","timeB","comparison","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport './style.scss';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      startResponse: false,\n      finishResponse: false,\n      endpoint: \"http://127.0.0.1:4001\",\n    };\n  }\n\n  componentWillMount() {\n    const { endpoint } = this.state;\n    const socket = socketIOClient(endpoint);\n    socket.on(\"StartHorses\", dataA => this.setState({ startResponse: dataA }));\n    socket.on(\"FinishHorses\", dataB => this.setState({ finishResponse: dataB }));\n\n\n  }\n  componentDidMount() {\n\n\n\n\n    // console.log('startResponse', this.state.startResponse);\n    // console.log('finishResponse', this.state.finishResponse);\n  }\n\n  componentDidUpdate(prevState) {\n    // If we have a new update\n    // if (!this.featuresEqual(prevState.startResponse, this.state.startResponse)) {\n\n    // }\n\n  }\n\n  // featuresEqual(a, b) {\n  //   const comparable = (features) => features\n  //       .slice()\n  //       .sort()\n  //       .join(',');\n\n  //   return comparable(a) === comparable(b);\n  // }\n\n  renderTableData() {\n    const { startResponse } = this.state;\n\n    if (startResponse && startResponse[0].event === 'start') {\n      return Object.keys(startResponse.sort(this.compare)).map(function(key) {\n        const id = startResponse[key].horse.name.replace(' ', '-');\n        return (\n          <tr key={key} id={id}>\n              <td>{startResponse[key].horse.id}</td>\n              <td>{startResponse[key].horse.name}</td>\n              <td>{startResponse[key].time > 0 ? startResponse[key].time : ''}</td>\n          </tr>\n        )\n      });\n    }\n    return;\n  }\n  updateTableData() {\n    const horses = this.state.startResponse;\n    const finishHorse = this.state.finishResponse;\n    const id = finishHorse.horse.name.replace(' ', '-');\n\n      const row = document.getElementById(id);\n\n      let child;\n      while (child = row.firstChild) {\n          child.remove();\n      }\n\n      const p = (<>\n        <td>{finishHorse.horse.id}</td>\n        <td>{finishHorse.horse.name}</td>\n        <td>{finishHorse.time}</td>\n        </>\n      );\n\n      row.appendChild(p);\n\n      console.log('Finsih HORSE:', finishHorse);\n\n\n    if (finishHorse && finishHorse.horse.name) {\n\n      for(let i = 0; i < horses.lenght; i++ ){\n        if (horses[i].name === finishHorse.horse.name) {\n          console.log('this horse', horses[i].name, ' : ',  finishHorse.horse.name )\n        }\n      }\n\n\n      const result = horses.find( ({ name }) => name === finishHorse.horse.name);\n\n      console.log('result', result);\n    }\n\n    // console.log('horses',horses);\n    // 4:\n    //   event: \"start\"\n    //   horse: {id: 1, name: \"Isabell Altenwerth\"}\n      // time: 13480\n    // console.log('finish horse', finishHorse);\n    // event: \"finish\"\n    // horse: {id: \"2\", name: \"Alfredo Mraz\"}\n    // time: 7710\n  }\n\n  // Not used??\n  // renderData() {\n  //   const { horses } = this.state;\n\n  //   return Object.keys(horses).map(function(key) {\n  //     const id = horses[key].horse.name.replace(' ', '-');\n  //     return (\n  //       <tr key={key} ref={id}>\n  //           <td>{horses[key].horse.id}</td>\n  //           <td>{horses[key].horse.name}</td>\n  //           <td>{horses[key].time}</td>\n  //           {/* <td>{getTimeInSeconds(horses[key].time)}</td> */}\n  //       </tr>\n  //     )\n  //   });\n  // }\n\n  getTimeInSeconds(time) {\n\n  }\n  compare(a, b) {\n    const timeA = a.time;\n    const timeB = b.time;\n\n    let comparison = 0;\n    if (timeA > timeB) {\n      comparison = 1;\n    } else if (timeA < timeB) {\n      comparison = -1;\n    }\n    return comparison;\n  }\n  // isClientMode() {\n  //   return typeof(ENVIRONMENT) != 'undefined' && ENVIRONMENT === 'client';\n  // }\n\n  render() {\n    return (\n        <div>\n          <table id='results'>\n            <tbody>\n              <tr>\n                <th>No</th>\n                <th>Horse</th>\n                <th>Time</th>\n              </tr>\n              {this.state.startResponse &&\n                this.renderTableData()\n              }\n              {this.state.finishResponse &&\n                this.updateTableData()\n              }\n            </tbody>\n          </table>\n        </div>\n    );\n  }\n}\nexport default App;\n\n\n// const tifOptions = Object.keys(tifs).map(key =>\n//   <option value={key}>{tifs[key]}</option>\n// )\n\n// {Object.keys(yourObject).map(function(key) {\n//   return <div>Key: {key}, Value: {yourObject[key]}</div>;\n// })}\n"]},"metadata":{},"sourceType":"module"}