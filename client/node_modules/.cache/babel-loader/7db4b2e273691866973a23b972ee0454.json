{"ast":null,"code":"var _jsxFileName = \"/home/carina/priv/trot-race-simulator/client/src/App.jsx\";\nimport React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport _ from 'underscore';\nimport './style.scss';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      startResponse: false,\n      finishResponse: false,\n      endpoint: \"http://127.0.0.1:4001\",\n      horses: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      endpoint\n    } = this.state;\n    const socket = socketIOClient(endpoint);\n    socket.on(\"StartHorses\", data => this.setState({\n      startResponse: data\n    }));\n    socket.on(\"FinishHorses\", data => this.setState({\n      finishResponse: data\n    }));\n    console.log('mounted!');\n    console.log('startResponse', this.state.startResponse);\n    console.log('finishResponse', this.state.finishResponse);\n  }\n\n  componentDidUpdate(prevState) {\n    const resp = this.state.startResponse;\n\n    if (resp.event === 'start') {\n      console.log('START');\n    }\n\n    if (resp.event === 'finish') {\n      console.log('FINISH');\n    }\n\n    console.log('updating...');\n    console.log('prevState', prevState);\n    console.log('state', this.state.startResponse); // If we have a new update\n    // if (!this.featuresEqual(prevState.startResponse, this.state.startResponse)) {\n    // }\n  }\n\n  featuresEqual(a, b) {\n    const comparable = features => features.slice().sort().join(',');\n\n    return comparable(a) === comparable(b);\n  }\n\n  renderTableData() {\n    const {\n      startResponse\n    } = this.state;\n    console.log('startResponse', startResponse); // {Object.keys(response.horse).map(function(key) {\n    //   // TODO:\n    //    if (typeof key === 'object') {}\n    //   return <div key={key}> Key value is {key}, and Value is {response[key]} </div>\n    // })}\n\n    {\n      /* The temperature in Florence is: {response} °F */\n    }\n\n    if (startResponse && startResponse[0].event === 'start') {\n      return Object.keys(startResponse.sort(this.compare)).map(function (key) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: key,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }\n        }, startResponse[key].horse.id), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }\n        }, startResponse[key].horse.name), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 15\n          }\n        }, startResponse[key].time > 0 ? startResponse[key].time : ''));\n      });\n    } else {\n      return;\n    }\n  } // Not used??\n\n\n  renderData() {\n    const {\n      horses\n    } = this.state;\n    console.log('response', horses);\n    return Object.keys(horses).map(function (key) {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: key,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }\n      }, horses[key].horse.id), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }, horses[key].horse.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, getTimeInSeconds(horses[key].time)));\n    });\n  }\n\n  getTimeInSeconds(time) {}\n\n  compare(a, b) {\n    const timeA = a.time;\n    const timeB = b.time;\n    let comparison = 0;\n\n    if (timeA > timeB) {\n      comparison = 1;\n    } else if (timeA < timeB) {\n      comparison = -1;\n    }\n\n    return comparison;\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      id: \"results\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, \"No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, \"Horse\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, \"Time\")), this.renderTableData())));\n  }\n\n}\n\nexport default App; // const tifOptions = Object.keys(tifs).map(key =>\n//   <option value={key}>{tifs[key]}</option>\n// )\n// {Object.keys(yourObject).map(function(key) {\n//   return <div>Key: {key}, Value: {yourObject[key]}</div>;\n// })}","map":{"version":3,"sources":["/home/carina/priv/trot-race-simulator/client/src/App.jsx"],"names":["React","Component","socketIOClient","_","App","constructor","state","startResponse","finishResponse","endpoint","horses","componentDidMount","socket","on","data","setState","console","log","componentDidUpdate","prevState","resp","event","featuresEqual","a","b","comparable","features","slice","sort","join","renderTableData","Object","keys","compare","map","key","horse","id","name","time","renderData","getTimeInSeconds","timeA","timeB","comparison","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport _ from 'underscore';\nimport './style.scss';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      startResponse: false,\n      finishResponse: false,\n      endpoint: \"http://127.0.0.1:4001\",\n      horses: [],\n    };\n  }\n\n  componentDidMount() {\n    const { endpoint } = this.state;\n    const socket = socketIOClient(endpoint);\n    socket.on(\"StartHorses\", data => this.setState({ startResponse: data }));\n    socket.on(\"FinishHorses\", data => this.setState({ finishResponse: data }));\n\n\n\n    console.log('mounted!')\n    console.log('startResponse', this.state.startResponse);\n    console.log('finishResponse', this.state.finishResponse);\n  }\n\n  componentDidUpdate(prevState) {\n    const resp = this.state.startResponse;\n\n    if (resp.event === 'start') {\n      console.log('START');\n    }\n    if (resp.event === 'finish') {\n      console.log('FINISH');\n    }\n\n    console.log('updating...');\n    console.log('prevState', prevState);\n    console.log('state', this.state.startResponse);\n    // If we have a new update\n    // if (!this.featuresEqual(prevState.startResponse, this.state.startResponse)) {\n\n    // }\n\n  }\n\n  featuresEqual(a, b) {\n    const comparable = (features) => features\n        .slice()\n        .sort()\n        .join(',');\n\n    return comparable(a) === comparable(b);\n  }\n\n  renderTableData() {\n    const { startResponse } = this.state;\n    console.log('startResponse', startResponse);\n\n    // {Object.keys(response.horse).map(function(key) {\n    //   // TODO:\n    //    if (typeof key === 'object') {}\n\n    //   return <div key={key}> Key value is {key}, and Value is {response[key]} </div>\n    // })}\n    {/* The temperature in Florence is: {response} °F */}\n\n    if (startResponse && startResponse[0].event === 'start') {\n      return Object.keys(startResponse.sort(this.compare)).map(function(key) {\n        return (\n          <tr key={key}>\n              <td>{startResponse[key].horse.id}</td>\n              <td>{startResponse[key].horse.name}</td>\n              <td>{startResponse[key].time > 0 ? startResponse[key].time : ''}</td>\n          </tr>\n        )\n      });\n    } else {\n      return;\n    }\n\n  }\n\n  // Not used??\n  renderData() {\n    const { horses } = this.state;\n    console.log('response', horses);\n\n    return Object.keys(horses).map(function(key) {\n      return (\n        <tr key={key}>\n            <td>{horses[key].horse.id}</td>\n            <td>{horses[key].horse.name}</td>\n            <td>{getTimeInSeconds(horses[key].time)}</td>\n        </tr>\n      )\n    });\n  }\n\n  getTimeInSeconds(time) {\n\n  }\n  compare(a, b) {\n    const timeA = a.time;\n    const timeB = b.time;\n\n    let comparison = 0;\n    if (timeA > timeB) {\n      comparison = 1;\n    } else if (timeA < timeB) {\n      comparison = -1;\n    }\n    return comparison;\n  }\n  render() {\n    return (\n        <div>\n          <table id='results'>\n            <tbody>\n              <tr>\n                <th>No</th>\n                <th>Horse</th>\n                <th>Time</th>\n              </tr>\n                {this.renderTableData()}\n            </tbody>\n          </table>\n        </div>\n    );\n  }\n}\nexport default App;\n\n\n// const tifOptions = Object.keys(tifs).map(key =>\n//   <option value={key}>{tifs[key]}</option>\n// )\n\n// {Object.keys(yourObject).map(function(key) {\n//   return <div>Key: {key}, Value: {yourObject[key]}</div>;\n// })}\n"]},"metadata":{},"sourceType":"module"}