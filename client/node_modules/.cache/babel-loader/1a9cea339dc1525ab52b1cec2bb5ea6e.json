{"ast":null,"code":"var _jsxFileName = \"/home/carina/priv/trot-race-simulator/client/src/App.jsx\";\nimport React from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport _ from 'underscore';\nimport Cookies from 'js-cookie';\nimport './style.scss';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      startResponse: false,\n      finishResponse: false,\n      endpoint: \"http://127.0.0.1:4001\",\n      update: ''\n    };\n  }\n\n  componentWillMount() {\n    const {\n      endpoint\n    } = this.state;\n    const socket = socketIOClient(endpoint);\n    socket.on(\"StartHorses\", dataA => this.setState({\n      startResponse: dataA,\n      update: 'start'\n    }));\n    socket.on(\"FinishHorses\", dataB => this.setState({\n      finishResponse: dataB,\n      update: 'finish'\n    }));\n  } // featuresEqual(a, b) {\n  //   const comparable = (features) => features\n  //       .slice()\n  //       .sort()\n  //       .join(',');\n  //   return comparable(a) === comparable(b);\n  // }\n\n\n  getTableData(data) {\n    return Object.keys(data.sort(this.compare)).map(function (key) {\n      const id = data[key].horse.name.replace(' ', '-');\n      Cookies.set('results', data);\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: key,\n        id: id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }\n      }, data[key].horse.id), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }\n      }, data[key].horse.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }\n      }, data[key].time > 0 ? data[key].time : ''));\n    });\n  }\n\n  renderTableData(type) {\n    const {\n      startResponse\n    } = this.state;\n\n    if (type === 'start') {\n      return this.getTableData(startResponse);\n    } else if (type === 'finish') {\n      const horses = Cookies.get('results');\n      const finishHorse = this.state.finishResponse;\n\n      let filtered = _.filter(horses, function (item) {\n        console.log('item', item);\n        return item.horse.name !== finishHorse.horse.name;\n      });\n\n      filtered.push(finishHorse);\n      this.setState({\n        horses: filtered\n      });\n      console.log('filtererd', filtered);\n      return this.getTableData(filtered);\n    }\n\n    return;\n  }\n\n  updateTableData() {\n    const horses = this.state.startResponse;\n    const finishHorse = this.state.finishResponse;\n\n    let filtered = _.filter(horses, function (item) {\n      console.log('item', item);\n      return item.horse.id !== finishHorse.horse.id;\n    });\n\n    filtered.push(finishHorse);\n    return this.getTableData(filtered); // Get the first child node of an <ul> element\n    // var elmt = document.getElementById(id).childNodes[0];\n    // Replace the first child node of <ul> with the newly created text node\n    // elmt.replaceChild(data, elmt.childNodes[0]);\n    // console.log('horses', horses);\n    // console.log('filtered', filtered);\n\n    console.log('filtered', filtered);\n\n    if (finishHorse && finishHorse.horse.name) {\n      // for(let i = 0; i < horses.lenght; i++ ){\n      //   if (horses[i].name === finishHorse.horse.name) {\n      //     console.log('this horse', horses[i].name, ' : ',  finishHorse.horse.name )\n      //   }\n      // }\n      const result = horses.find(({\n        name\n      }) => name === finishHorse.horse.name); // console.log('result', result);\n    } // console.log('horses',horses);\n    // 4:\n    //   event: \"start\"\n    //   horse: {id: 1, name: \"Isabell Altenwerth\"}\n    // time: 13480\n    // console.log('finish horse', finishHorse);\n    // event: \"finish\"\n    // horse: {id: \"2\", name: \"Alfredo Mraz\"}\n    // time: 7710\n\n  } // Not used??\n  // renderData() {\n  //   const { horses } = this.state;\n  //   return Object.keys(horses).map(function(key) {\n  //     const id = horses[key].horse.name.replace(' ', '-');\n  //     return (\n  //       <tr key={key} ref={id}>\n  //           <td>{horses[key].horse.id}</td>\n  //           <td>{horses[key].horse.name}</td>\n  //           <td>{horses[key].time}</td>\n  //           {/* <td>{getTimeInSeconds(horses[key].time)}</td> */}\n  //       </tr>\n  //     )\n  //   });\n  // }\n\n\n  getTimeInSeconds(time) {}\n\n  compare(a, b) {\n    const timeA = a.time;\n    const timeB = b.time;\n    let comparison = 0;\n\n    if (timeA > timeB) {\n      comparison = 1;\n    } else if (timeA < timeB) {\n      comparison = -1;\n    }\n\n    return comparison;\n  } // isClientMode() {\n  //   return typeof(ENVIRONMENT) != 'undefined' && ENVIRONMENT === 'client';\n  // }\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      id: \"results\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, \"No\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, \"Horse\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, \"Time\")), this.state.update && this.renderTableData(this.state.update))));\n  }\n\n}\n\nexport default App; // const tifOptions = Object.keys(tifs).map(key =>\n//   <option value={key}>{tifs[key]}</option>\n// )\n// {Object.keys(yourObject).map(function(key) {\n//   return <div>Key: {key}, Value: {yourObject[key]}</div>;\n// })}","map":{"version":3,"sources":["/home/carina/priv/trot-race-simulator/client/src/App.jsx"],"names":["React","socketIOClient","_","Cookies","App","Component","constructor","state","startResponse","finishResponse","endpoint","update","componentWillMount","socket","on","dataA","setState","dataB","getTableData","data","Object","keys","sort","compare","map","key","id","horse","name","replace","set","time","renderTableData","type","horses","get","finishHorse","filtered","filter","item","console","log","push","updateTableData","result","find","getTimeInSeconds","a","b","timeA","timeB","comparison","render"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport socketIOClient from \"socket.io-client\";\nimport _ from 'underscore';\nimport Cookies from 'js-cookie';\nimport './style.scss';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      startResponse: false,\n      finishResponse: false,\n      endpoint: \"http://127.0.0.1:4001\",\n      update: '',\n    };\n  }\n\n  componentWillMount() {\n    const { endpoint } = this.state;\n    const socket = socketIOClient(endpoint);\n    socket.on(\"StartHorses\", dataA => this.setState({ startResponse: dataA, update: 'start' }));\n    socket.on(\"FinishHorses\", dataB => this.setState({ finishResponse: dataB, update: 'finish' }));\n\n\n  }\n\n\n  // featuresEqual(a, b) {\n  //   const comparable = (features) => features\n  //       .slice()\n  //       .sort()\n  //       .join(',');\n\n  //   return comparable(a) === comparable(b);\n  // }\n\n  getTableData(data){\n    return Object.keys(data.sort(this.compare)).map(function(key) {\n      const id = data[key].horse.name.replace(' ', '-');\n      Cookies.set('results', data);\n      return (\n        <tr key={key} id={id}>\n            <td>{data[key].horse.id}</td>\n            <td>{data[key].horse.name}</td>\n            <td>{data[key].time > 0 ? data[key].time : ''}</td>\n        </tr>\n      )\n    });\n\n  }\n\n  renderTableData(type) {\n    const { startResponse } = this.state;\n\n    if (type === 'start') {\n      return this.getTableData(startResponse);\n    }\n    else if (type === 'finish') {\n      const horses = Cookies.get('results');\n      const finishHorse = this.state.finishResponse;\n\n      let filtered = _.filter(horses, function(item) {\n        console.log('item', item);\n        return item.horse.name !== finishHorse.horse.name;\n      });\n\n      filtered.push(finishHorse);\n\n      this.setState({\n        horses: filtered\n      });\n      console.log('filtererd', filtered);\n      return this.getTableData(filtered);\n    }\n    return;\n  }\n\n  updateTableData() {\n    const horses = this.state.startResponse;\n    const finishHorse = this.state.finishResponse;\n\n    let filtered = _.filter(horses, function(item) {\n      console.log('item', item);\n      return item.horse.id !== finishHorse.horse.id;\n    });\n\n    filtered.push(finishHorse);\n    return this.getTableData(filtered);\n\n    // Get the first child node of an <ul> element\n    // var elmt = document.getElementById(id).childNodes[0];\n\n    // Replace the first child node of <ul> with the newly created text node\n    // elmt.replaceChild(data, elmt.childNodes[0]);\n\n\n\n\n    // console.log('horses', horses);\n    // console.log('filtered', filtered);\n\n    console.log('filtered', filtered);\n\n\n\n\n    if (finishHorse && finishHorse.horse.name) {\n\n      // for(let i = 0; i < horses.lenght; i++ ){\n      //   if (horses[i].name === finishHorse.horse.name) {\n      //     console.log('this horse', horses[i].name, ' : ',  finishHorse.horse.name )\n      //   }\n      // }\n\n\n      const result = horses.find( ({ name }) => name === finishHorse.horse.name);\n\n      // console.log('result', result);\n    }\n\n    // console.log('horses',horses);\n    // 4:\n    //   event: \"start\"\n    //   horse: {id: 1, name: \"Isabell Altenwerth\"}\n      // time: 13480\n    // console.log('finish horse', finishHorse);\n    // event: \"finish\"\n    // horse: {id: \"2\", name: \"Alfredo Mraz\"}\n    // time: 7710\n  }\n\n  // Not used??\n  // renderData() {\n  //   const { horses } = this.state;\n\n  //   return Object.keys(horses).map(function(key) {\n  //     const id = horses[key].horse.name.replace(' ', '-');\n  //     return (\n  //       <tr key={key} ref={id}>\n  //           <td>{horses[key].horse.id}</td>\n  //           <td>{horses[key].horse.name}</td>\n  //           <td>{horses[key].time}</td>\n  //           {/* <td>{getTimeInSeconds(horses[key].time)}</td> */}\n  //       </tr>\n  //     )\n  //   });\n  // }\n\n  getTimeInSeconds(time) {\n\n  }\n  compare(a, b) {\n    const timeA = a.time;\n    const timeB = b.time;\n\n    let comparison = 0;\n    if (timeA > timeB) {\n      comparison = 1;\n    } else if (timeA < timeB) {\n      comparison = -1;\n    }\n    return comparison;\n  }\n  // isClientMode() {\n  //   return typeof(ENVIRONMENT) != 'undefined' && ENVIRONMENT === 'client';\n  // }\n\n  render() {\n    return (\n        <div>\n          <table id='results'>\n            <tbody>\n              <tr>\n                <th>No</th>\n                <th>Horse</th>\n                <th>Time</th>\n              </tr>\n                {this.state.update &&\n                  this.renderTableData(this.state.update)\n                }\n            </tbody>\n          </table>\n        </div>\n    );\n  }\n}\nexport default App;\n\n\n// const tifOptions = Object.keys(tifs).map(key =>\n//   <option value={key}>{tifs[key]}</option>\n// )\n\n// {Object.keys(yourObject).map(function(key) {\n//   return <div>Key: {key}, Value: {yourObject[key]}</div>;\n// })}\n"]},"metadata":{},"sourceType":"module"}